---
id: update-existing-definition
title: "Update workflow definition"
description: "Use this resource to update an existing workflow definition. Updating a workflow definition creates and registers a new version of the definition and preserves the old definition in version history. This ensures that any workflows that have already been started from the old version runs to completion while new workflows are started based on the latest version of the workflow definition."
sidebar_label: "Update workflow definition"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "put api-method"
info_path: connect/reference/automation-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Update workflow definition"}
>
</Heading>

<MethodEndpoint
  method={"put"}
  path={"/api/v1/accounts/{accountId}/definitions/{definitionId}"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Use this resource to update an existing workflow definition. Updating a workflow definition creates and registers a new version of the definition and preserves the old definition in version history. This ensures that any workflows that have already been started from the old version runs to completion while new workflows are started based on the latest version of the workflow definition.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"name":"accountId","in":"path","description":"Account id","required":true,"schema":{"type":"string","example":"test_account_id"}},{"name":"definitionId","in":"path","description":"Workflow definition id.","required":true,"schema":{"type":"string","example":"5870442f-3ddd-4657-b74c-6e17308f5230"}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","required":["accountId","trigger","definition"],"properties":{"subAccountId":{"type":"string","description":"8x8 subaccount id. If subaccount id is set, workflows with triggers like inbound message will only be started when that subaccount receives a message. If the subaccount id is null, workflows will be started when any subaccount under your account receives an inbound message."},"trigger":{"type":"string","enum":["inbound_sms","inbound_chat_apps","http_request"],"description":"Triggers are external events that start workflows. Supported triggers are\n  * inbound_sms (starts workflows when the account receives a SMS.)\n  * inbound_chat_apps (starts workflows when the account receives a message via a chat apps channel).\n  * http_request (starts workflows when a HTTP request is made to the trigger).","title":"trigger"},"status":{"type":"string","enum":["enabled","disabled"],"description":"The status property allows to deactivate an existing workflow definition or to save a new one, without making it active. \n  * enabled (this workflow definition is active and will start based on the trigger)\n  * disabled (this workflow definition is not active and will not start, regardless of the trigger)","default":"disabled","title":"status"},"definition":{"type":"object","required":["name","steps"],"properties":{"name":{"type":"string","description":"Descriptive name for the definition. Name does not need to be unique."},"steps":{"type":"array","description":"Collection of steps that defines the activities to be executed when a workflow from the definition is run.","items":{"anyOf":[{"allOf":[{"description":"Step defines an activity to be performed when the workflow is running.","type":"object","properties":{"id":{"type":"string","description":"Step id. Step id must be unique within the workflow definition."}},"required":["id"],"title":"step"}],"description":"Step to send a SMS.","properties":{"stepType":{"type":"string","enum":["SMS"],"default":"SMS","description":"Type of the step."},"inputs":{"type":"object","description":"Input parameters supported by the SMS step. All input parameters can be dynamically computed using JavaScript expressions.","required":["subAccountId","destination","text"],"properties":{"subAccountId":{"type":"string","description":"SMS enabled 8x8 subaccount."},"destination":{"type":"string","description":"Valid phone number."},"text":{"type":"string","description":"Content of the SMS."},"country":{"type":"string","description":"Two letter country code of the destination phone number."},"source":{"type":"string","description":"Sender id."},"clientMessageId":{"type":"string","description":"Client message id to identify the SMS on the client platform."},"encoding":{"type":"string","description":"Messaging encoding type. Supported encodings are\n  * AUTO (automatically detect encoding)\n  * GSM7\n  * UCS2"},"scheduled":{"type":"string","description":"ISO 8601 formatted date and time to send the SMS at a future time."},"expiry":{"type":"string","description":"ISO 8601 formatted date and time after which the message will not be sent."},"dlrCallbackUrl":{"type":"string","description":"Callback URL to receive delivery receipts."}}},"outputs":{"type":"object","description":"Step output values that are available for saving to workflow context.","properties":{"umid":{"type":"string","description":"Unique message id assigned by the 8x8 messaging platform."},"status":{"type":"string","description":"Last known status of the message."},"description":{"type":"string","description":"Detailed description of the message status."},"destination":{"type":"string","description":"Phone number to which the message was sent."},"encoding":{"type":"string","description":"Encoding used to send the message."},"clientMessageId":{"type":"string","description":"Client message id sent when the message was being sent."}}},"nextStepId":{"type":"string","description":"Step id of the step to be executed after the current step. If not set, workflow terminates after executing the current step."}},"type":"object","title":"smsStep"},{"allOf":[{"description":"Step defines an activity to be performed when the workflow is running.","type":"object","properties":{"id":{"type":"string","description":"Step id. Step id must be unique within the workflow definition."}},"required":["id"],"title":"step"}],"type":"object","description":"Step to send a chat apps message.","required":["stepType","inputs"],"properties":{"stepType":{"type":"string","enum":["ChatAppsMessage"],"default":"ChatAppsMessage","description":"Type of the step."},"inputs":{"type":"object","description":"Input parameters supported by the chat apps message step. All input parameters can be dynamically computed using JavaScript expressions.","required":["subAccountId","user","type","content"],"properties":{"subAccountId":{"type":"string","description":"Chat apps enabled 8x8 subaccount id."},"user":{"type":"object","description":"Recipient details. User object depends on the channel message is being sent to. Refer to [chat apps documentation](/connect/reference#send-message) for more information."},"type":{"type":"string","description":"Message content type. For a list of supported content types, please refer to [chat apps documentation](/connect/reference#send-message)."},"content":{"type":"object","description":"Message content. Message content depends on the type of content being sent. Refer to [chat apps documentation](/connect/reference#send-message) for more information."},"clientMessageId":{"type":"string","description":"Unique message identifier provided by the client."}}},"outputs":{"type":"object","description":"Output properties supported by ChatAppsMessage step.","properties":{"umid":{"type":"string","description":"Unique message id assigned by the 8x8 messaging platform."},"status":{"type":"string","description":"Last known status of the message."},"description":{"type":"string","description":"Detailed description of the message status."},"requestId":{"type":"string","description":"Unique id of the chat apps message request. If the request failed before a umid is assigned by the messaging platform, request id can be used to troubleshoot the error."}}},"nextStepId":{"type":"string","description":"Step id of the step to be executed after the current step. If not set, workflow terminates after executing the current step."}},"title":"chatAppsMessageStep"},{"allOf":[{"description":"Step defines an activity to be performed when the workflow is running.","type":"object","properties":{"id":{"type":"string","description":"Step id. Step id must be unique within the workflow definition."}},"required":["id"],"title":"step"}],"type":"object","description":"Step to make a HTTP request.","required":["inputs","stepType"],"properties":{"stepType":{"type":"string","enum":["HttpRequest"],"default":"HttpRequest","description":"Type of the step."},"inputs":{"type":"object","description":"Input properties supported by HTTP request step.","required":["url","method"],"properties":{"url":{"type":"string","description":"URL to make the HTTP request to."},"method":{"type":"string","description":"HTTP method to use when making the HTTP request. All standard HTTP methods like GET, POST, PUT, DELETE, PATCH, etc are supported."},"headers":{"type":"object","description":"Map of HTTP headers to use in the request. Note that for Content-Type header, we only currently support `application/json`.","properties":{"Authorization":{"type":"string","description":"Authorization header."},"Accept":{"type":"string","description":"Accept header."}}},"parameters":{"type":"object","description":"Map of query parameters to use in the request.","properties":{"query_param1":{"type":"string","description":"An example query parameter."}}},"body":{"type":"object","description":"Object containing request data. The object will be serialized as JSON before sending the request."},"timeoutSeconds":{"type":"integer","description":"HTTP request timeout. Default timeout is 5 seconds."}}},"outputs":{"type":"object","description":"Output properties supported by http request step.","properties":{"responseCode":{"type":"integer","description":"HTTP response status code received from the server."},"reasonPhrase":{"type":"string","description":"HTTP response message that summarizes the meaning of the HTTP status code."},"responseBody":{"type":"object","description":"HTTP response data."}}},"nextStepId":{"type":"string","description":"Step id of the step to be executed after the current step. If not set, workflow terminates after executing the current step."}},"title":"httpRequestStep"},{"allOf":[{"description":"Step defines an activity to be performed when the workflow is running.","type":"object","properties":{"id":{"type":"string","description":"Step id. Step id must be unique within the workflow definition."}},"required":["id"],"title":"step"}],"type":"object","description":"Step to dynamically create branches in the workflow.","required":["stepType","selectNextStep"],"properties":{"stepType":{"type":"string","enum":["Branch"],"default":"Branch","description":"Type of the step."},"selectNextStep":{"type":"object","description":"Map containing step ids as keys and JavaScript expressions as values to dynamically choose the next steps to execute. All conditions are evaluated and tried. Therefore, if more than one condition evaluates to true, more than one step will be executed. For the default branch, condition can be set to null.","default":null}},"title":"branchStep"},{"allOf":[{"description":"Step defines an activity to be performed when the workflow is running.","type":"object","properties":{"id":{"type":"string","description":"Step id. Step id must be unique within the workflow definition."}},"required":["id"],"title":"step"}],"type":"object","description":"Step to make the workflow pause for a specified duration.","required":["stepType","inputs"],"properties":{"stepType":{"type":"string","enum":["Wait"],"default":"Wait","description":"Type of the step."},"inputs":{"type":"object","description":"Input properties supported by wait step.","required":["duration"],"properties":{"duration":{"type":"string","description":"Timespan in the format \"d.HH:mm:ss\" to pause the workflow for. For example, \"1.6:30:15\" makes the workflow pause for 1 day, 6 hours, 30 minutes, and 15 seconds. If the timespan is in days, \"HH:mm:ss\" can be omitted. For instance, \"2\" pauses the workflow for two days."}}},"nextStepId":{"type":"string","description":"Step id of the step to be executed after the current step. If not set, workflow terminates after executing the current step."}},"title":"waitStep"},{"allOf":[{"description":"Step defines an activity to be performed when the workflow is running.","type":"object","properties":{"id":{"type":"string","description":"Step id. Step id must be unique within the workflow definition."}},"required":["id"],"title":"step"}],"type":"object","description":"Step to make the workflow wait for a reply from an end-user.","required":["stepType","inputs","outputs"],"properties":{"stepType":{"type":"string","enum":["WaitForReply"],"default":"WaitForReply","description":"Type of the step."},"inputs":{"type":"object","description":"Input properties supported by wait for reply step.","required":["from","channel"],"properties":{"from":{"type":"string","description":"Phone number or channel user id of the user for whose reply the workflow is waiting for. If the channel is SMS, `from` should be the msisdn. If the channel is a chat apps channel, `from` should be based on the channel user id of the inbound message."},"channel":{"type":"string","description":"Messaging channel like sms, whatsapp, etc. For a complete list, refer to [channel type values](/connect/reference#list-of-supported-chatapps-channels)."},"timeout":{"type":"string","description":"Timeout in the format \"d.HH:mm:ss\". For example, \"1.6:30:15\" indicates the workflow to move on if a reply from the user is not received within 1 day, 6 hours, 30 minutes, and 15 seconds. If the timeout is in days, \"HH:mm:ss\" can be omitted. For instance, \"2\" waits for 2 days before timing out.","default":"1.00:00:00"}}},"outputs":{"type":"object","description":"Outputs supported by wait for reply step.","required":["reply"],"properties":{"reply":{"type":"object","description":"Inbound message data. Exact nature of the payload depends on the version of the inbound message webhook configured for your account. Refer to [webhook object structure](/connect/reference#webhook-object-structure) for more information."}}},"selectNextStep":{"type":"object","description":"Steps to execute depending on whether a reply is received or not. Presence or absence of the reply in the outputs indicates whether a reply was received within the timeout. Alternatively, you can set the `nextStepId` to a `Branch` step and check the conditions there.","example":{"reply_received":"{{data.reply != null}}","no_reply_received":"{{data.reply == null}}"}},"nextStepId":{"type":"string","description":"Step id of the step to be executed after the current step. If not set, workflow terminates after executing the current step. Do not use `nextStepId` and `selectNextStep` at the same time. Use one or the other."}},"title":"waitForReplyStep"},{"allOf":[{"description":"Step defines an activity to be performed when the workflow is running.","type":"object","properties":{"id":{"type":"string","description":"Step id. Step id must be unique within the workflow definition."}},"required":["id"],"title":"step"}],"type":"object","description":"Step to make the workflow wait for a reply from an end-user.","required":["stepType","inputs"],"properties":{"stepType":{"type":"string","enum":["VoiceMessage"],"default":"VoiceMessage","description":"Type of the step."},"inputs":{"type":"object","description":"Input properties supported by the voice message step.","required":["action","params"],"properties":{"subAccountId":{"type":"string","description":"Voice enabled subaccount id."},"clientRequestId":{"type":"string","description":"Unique identifier to reference the voice the message. JavaScript helper function `uuid()` can be used to generate a uuid."},"action":{"type":"string","enum":["say","say&capture","playFile"],"default":"say","description":"Action to be performed as part of the voice message. Refer to [voice messaging API documentation](/connect/reference#voice-messaging-api-1) for more information."},"params":{"type":"object","description":"Voice message parameters. Depends on the voice message action. Refer to [voice messaging API documentation](/connect/reference#voice-messaging-api-1) for supported voice message parameters."}}},"outputs":{"type":"object","description":"Supported output properties by the voice message step.","required":["response"],"properties":{"response":{"type":"object","description":"HTTP response message received from the voice messaging API. Refer to [voice messaging API documentation](/connect/reference#voice-messaging-api-1) for more information."}}},"nextStepId":{"type":"string","description":"Step id of the step to be executed after the current step. If not set, workflow terminates after executing the current step. Do not use `nextStepId` and `selectNextStep` at the same time. Use one or the other."}},"title":"voiceMessageStep"},{"allOf":[{"description":"Step defines an activity to be performed when the workflow is running.","type":"object","properties":{"id":{"type":"string","description":"Step id. Step id must be unique within the workflow definition."}},"required":["id"],"title":"step"}],"type":"object","description":"Step to make the workflow wait for a DTMF response from an end-user.","required":["stepType","inputs","outputs"],"properties":{"stepType":{"type":"string","enum":["WaitForDTMF"],"default":"WaitForDTMF","description":"Type of the step."},"inputs":{"type":"object","description":"Input properties supported by the wait for DTMF step.","properties":{"dtmfRequestId":{"type":"string","description":"Client request id or the uid of the DTMF response. Recommendation is to set the client request id in the voice message step, save it to workflow context and reference it here. If you did not set a client request id in the voice message step, save the uid of the voice message response to workflow context and reference it here."},"timeout":{"type":"string","description":"Timeout in the format \"d.HH:mm:ss\". For example, \"1.6:30:15\" indicates the workflow to move on if a reply from the user is not received within 1 day, 6 hours, 30 minutes, and 15 seconds. If the timeout is in days, \"HH:mm:ss\" can be omitted. For instance, \"2\" waits for 2 days before timing out.","default":"1.00:00:00"}}},"outputs":{"type":"object","description":"Output properties supported by the wait for DTMF step.","required":["dtmfData"],"properties":{"dtmfData":{"type":"object","description":"DTMF response data returned by the voice messaging API. Refer to [voice messaging API documentation](/connect/reference#voice-messaging-api-1) for more information.","example":{"uid":"AA562920-DD44-11EB-8FDE-A7A1C7823C5F","status":{"code":"DTMF","timestamp":"2021-07-05T03:54:31.271Z"},"destination":"xxxxxxxxxx","clientRequestId":"974eccfc-0607-4a99-a129-f9ee718e5fc1","actionDetails":{"dtmf":"2"}}}}},"selectNextStep":{"type":"object","description":"Steps to execute depending on the DTMF code. Presence or absence of the `dtmfData` in the outputs indicates whether a reply was received within the timeout. Alternatively, you can set the `nextStepId` to a `Branch` step and check the conditions there.","example":{"dtmf_1":"{{data.dtmf == '1'}}","dtmf_2":"{{data.dtmf == '2'}}","no_reply":"{{data.dtmf == null}}","invalid_dtmf":"{{data.dtmf != null && data.dtmf != '1' && data.dtmf != '2'}}"}}},"title":"waitForDTMFStep"}]}}}}},"title":"definitionInput"},"examples":{"definitionInput":{"value":{"subaccountId":"8x8_test_subaccount","trigger":"inbound_chat_apps","status":"enabled","definition":{"name":"Send automatic reply","steps":[{"id":"step1","stepType":"Wait","inputs":{"duration":"00:02:00"},"nextStepId":"step2"},{"id":"step2","stepType":"ChatAppsMessage","inputs":{"subAccountId":"8x8_subaccount_id","user":{"msisdn":"{{data.payload.user.msisdn}}"},"type":"text","content":{"text":"Hello, world!"}}},{"id":"step3","stepType":"SMS","inputs":{"subAccountId":"8x8_subaccount_id","destination":"{{data.payload.user.msisdn}}","source":"sender_id","text":"Hello, world!"},"nextStepId":"step4"},{"id":"step4","stepType":"HttpRequest","inputs":{"url":"https://example.com","method":"POST","headers":{"Authorization":"Bearer your_bearer_token"},"parameters":{"query_param_1":"query_param_value"},"body":{"data":{"field_1":"value_1","field_2":{"field_3":"value_3"}}}},"outputs":{"http_request_response_code":"{{step.responseCode}}"},"nextStepId":"step5"},{"id":"step5","stepType":"Branch","selectNextStep":{"step6":"{{data.http_request_response_code == 200}}","step7":"{{data.http_request_response_code >= 400 && http_request_response_code < 500}}","step2":null}},{"id":"step6","stepType":"If","do":[[{"id":"step9","stepType":"Wait","inputs":{"duration":"1"}}]]},{"id":"step7","stepType":"WaitForReply","inputs":{"from":"{{data.payload.user.channelUserId}}","channel":"whatsapp","timeout":"00:15:00"},"outputs":{"step7_data":"{{step.reply}}"},"selectNextStep":{"step1":"{{data.step7_data == null}}","step8":"{{data.step7_data != null}}"}},{"id":"step8","stepType":"VoiceMessage","inputs":{"subAccountId":"test_subaccount_id","action":"say&capture","clientRequestId":"{{uuid()}}","params":{"source":"source_phone_number","destination":"destination_phone_number","text":"Options 1, 2, 3","repetition":2,"voiceProfile":"en-US-ZiraRUS","speed":1}},"outputs":{"dtmf_correlation_id":"{{step.response.clientRequestId}}"},"nextStepId":"step9"},{"id":"step9","stepType":"WaitForDTMF","inputs":{"correlationId":"{{data.dtmf_correlation_id}}","timeout":"00:05:00"},"outputs":{"dtmf_code":"{{step.dtmfData.actionDetails.dtmf}}"},"selectNextStep":{"dtmf_1":"{{data.dtmf_code == '1'}}","dtmf_2":"{{data.dtmf_code == '2'}}","dtmf_3":"{{data.dtmf_code == '3'}}","no_dtmf":"{{data.dtmf_code == null}}","invalid_dtmf":"{{data.dtmf_code != null && data.dtmf_code != '1' && data.dtmf_code != '2' && data.dtmf_code != '3'}}"}}]}}}}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Updated workflow definition.","content":{"application/json":{"schema":{"allOf":[{"type":"object","required":["accountId","trigger","definition"],"properties":{"subAccountId":{"type":"string","description":"8x8 subaccount id. If subaccount id is set, workflows with triggers like inbound message will only be started when that subaccount receives a message. If the subaccount id is null, workflows will be started when any subaccount under your account receives an inbound message."},"trigger":{"type":"string","enum":["inbound_sms","inbound_chat_apps","http_request"],"description":"Triggers are external events that start workflows. Supported triggers are\n  * inbound_sms (starts workflows when the account receives a SMS.)\n  * inbound_chat_apps (starts workflows when the account receives a message via a chat apps channel).\n  * http_request (starts workflows when a HTTP request is made to the trigger).","title":"trigger"},"status":{"type":"string","enum":["enabled","disabled"],"description":"The status property allows to deactivate an existing workflow definition or to save a new one, without making it active. \n  * enabled (this workflow definition is active and will start based on the trigger)\n  * disabled (this workflow definition is not active and will not start, regardless of the trigger)","default":"disabled","title":"status"},"definition":{"type":"object","required":["name","steps"],"properties":{"name":{"type":"string","description":"Descriptive name for the definition. Name does not need to be unique."},"steps":{"type":"array","description":"Collection of steps that defines the activities to be executed when a workflow from the definition is run.","items":{"anyOf":[{"allOf":[{"description":"Step defines an activity to be performed when the workflow is running.","type":"object","properties":{"id":{"type":"string","description":"Step id. Step id must be unique within the workflow definition."}},"required":["id"],"title":"step"}],"description":"Step to send a SMS.","properties":{"stepType":{"type":"string","enum":["SMS"],"default":"SMS","description":"Type of the step."},"inputs":{"type":"object","description":"Input parameters supported by the SMS step. All input parameters can be dynamically computed using JavaScript expressions.","required":["subAccountId","destination","text"],"properties":{"subAccountId":{"type":"string","description":"SMS enabled 8x8 subaccount."},"destination":{"type":"string","description":"Valid phone number."},"text":{"type":"string","description":"Content of the SMS."},"country":{"type":"string","description":"Two letter country code of the destination phone number."},"source":{"type":"string","description":"Sender id."},"clientMessageId":{"type":"string","description":"Client message id to identify the SMS on the client platform."},"encoding":{"type":"string","description":"Messaging encoding type. Supported encodings are\n  * AUTO (automatically detect encoding)\n  * GSM7\n  * UCS2"},"scheduled":{"type":"string","description":"ISO 8601 formatted date and time to send the SMS at a future time."},"expiry":{"type":"string","description":"ISO 8601 formatted date and time after which the message will not be sent."},"dlrCallbackUrl":{"type":"string","description":"Callback URL to receive delivery receipts."}}},"outputs":{"type":"object","description":"Step output values that are available for saving to workflow context.","properties":{"umid":{"type":"string","description":"Unique message id assigned by the 8x8 messaging platform."},"status":{"type":"string","description":"Last known status of the message."},"description":{"type":"string","description":"Detailed description of the message status."},"destination":{"type":"string","description":"Phone number to which the message was sent."},"encoding":{"type":"string","description":"Encoding used to send the message."},"clientMessageId":{"type":"string","description":"Client message id sent when the message was being sent."}}},"nextStepId":{"type":"string","description":"Step id of the step to be executed after the current step. If not set, workflow terminates after executing the current step."}},"type":"object","title":"smsStep"},{"allOf":[{"description":"Step defines an activity to be performed when the workflow is running.","type":"object","properties":{"id":{"type":"string","description":"Step id. Step id must be unique within the workflow definition."}},"required":["id"],"title":"step"}],"type":"object","description":"Step to send a chat apps message.","required":["stepType","inputs"],"properties":{"stepType":{"type":"string","enum":["ChatAppsMessage"],"default":"ChatAppsMessage","description":"Type of the step."},"inputs":{"type":"object","description":"Input parameters supported by the chat apps message step. All input parameters can be dynamically computed using JavaScript expressions.","required":["subAccountId","user","type","content"],"properties":{"subAccountId":{"type":"string","description":"Chat apps enabled 8x8 subaccount id."},"user":{"type":"object","description":"Recipient details. User object depends on the channel message is being sent to. Refer to [chat apps documentation](/connect/reference#send-message) for more information."},"type":{"type":"string","description":"Message content type. For a list of supported content types, please refer to [chat apps documentation](/connect/reference#send-message)."},"content":{"type":"object","description":"Message content. Message content depends on the type of content being sent. Refer to [chat apps documentation](/connect/reference#send-message) for more information."},"clientMessageId":{"type":"string","description":"Unique message identifier provided by the client."}}},"outputs":{"type":"object","description":"Output properties supported by ChatAppsMessage step.","properties":{"umid":{"type":"string","description":"Unique message id assigned by the 8x8 messaging platform."},"status":{"type":"string","description":"Last known status of the message."},"description":{"type":"string","description":"Detailed description of the message status."},"requestId":{"type":"string","description":"Unique id of the chat apps message request. If the request failed before a umid is assigned by the messaging platform, request id can be used to troubleshoot the error."}}},"nextStepId":{"type":"string","description":"Step id of the step to be executed after the current step. If not set, workflow terminates after executing the current step."}},"title":"chatAppsMessageStep"},{"allOf":[{"description":"Step defines an activity to be performed when the workflow is running.","type":"object","properties":{"id":{"type":"string","description":"Step id. Step id must be unique within the workflow definition."}},"required":["id"],"title":"step"}],"type":"object","description":"Step to make a HTTP request.","required":["inputs","stepType"],"properties":{"stepType":{"type":"string","enum":["HttpRequest"],"default":"HttpRequest","description":"Type of the step."},"inputs":{"type":"object","description":"Input properties supported by HTTP request step.","required":["url","method"],"properties":{"url":{"type":"string","description":"URL to make the HTTP request to."},"method":{"type":"string","description":"HTTP method to use when making the HTTP request. All standard HTTP methods like GET, POST, PUT, DELETE, PATCH, etc are supported."},"headers":{"type":"object","description":"Map of HTTP headers to use in the request. Note that for Content-Type header, we only currently support `application/json`.","properties":{"Authorization":{"type":"string","description":"Authorization header."},"Accept":{"type":"string","description":"Accept header."}}},"parameters":{"type":"object","description":"Map of query parameters to use in the request.","properties":{"query_param1":{"type":"string","description":"An example query parameter."}}},"body":{"type":"object","description":"Object containing request data. The object will be serialized as JSON before sending the request."},"timeoutSeconds":{"type":"integer","description":"HTTP request timeout. Default timeout is 5 seconds."}}},"outputs":{"type":"object","description":"Output properties supported by http request step.","properties":{"responseCode":{"type":"integer","description":"HTTP response status code received from the server."},"reasonPhrase":{"type":"string","description":"HTTP response message that summarizes the meaning of the HTTP status code."},"responseBody":{"type":"object","description":"HTTP response data."}}},"nextStepId":{"type":"string","description":"Step id of the step to be executed after the current step. If not set, workflow terminates after executing the current step."}},"title":"httpRequestStep"},{"allOf":[{"description":"Step defines an activity to be performed when the workflow is running.","type":"object","properties":{"id":{"type":"string","description":"Step id. Step id must be unique within the workflow definition."}},"required":["id"],"title":"step"}],"type":"object","description":"Step to dynamically create branches in the workflow.","required":["stepType","selectNextStep"],"properties":{"stepType":{"type":"string","enum":["Branch"],"default":"Branch","description":"Type of the step."},"selectNextStep":{"type":"object","description":"Map containing step ids as keys and JavaScript expressions as values to dynamically choose the next steps to execute. All conditions are evaluated and tried. Therefore, if more than one condition evaluates to true, more than one step will be executed. For the default branch, condition can be set to null.","default":null}},"title":"branchStep"},{"allOf":[{"description":"Step defines an activity to be performed when the workflow is running.","type":"object","properties":{"id":{"type":"string","description":"Step id. Step id must be unique within the workflow definition."}},"required":["id"],"title":"step"}],"type":"object","description":"Step to make the workflow pause for a specified duration.","required":["stepType","inputs"],"properties":{"stepType":{"type":"string","enum":["Wait"],"default":"Wait","description":"Type of the step."},"inputs":{"type":"object","description":"Input properties supported by wait step.","required":["duration"],"properties":{"duration":{"type":"string","description":"Timespan in the format \"d.HH:mm:ss\" to pause the workflow for. For example, \"1.6:30:15\" makes the workflow pause for 1 day, 6 hours, 30 minutes, and 15 seconds. If the timespan is in days, \"HH:mm:ss\" can be omitted. For instance, \"2\" pauses the workflow for two days."}}},"nextStepId":{"type":"string","description":"Step id of the step to be executed after the current step. If not set, workflow terminates after executing the current step."}},"title":"waitStep"},{"allOf":[{"description":"Step defines an activity to be performed when the workflow is running.","type":"object","properties":{"id":{"type":"string","description":"Step id. Step id must be unique within the workflow definition."}},"required":["id"],"title":"step"}],"type":"object","description":"Step to make the workflow wait for a reply from an end-user.","required":["stepType","inputs","outputs"],"properties":{"stepType":{"type":"string","enum":["WaitForReply"],"default":"WaitForReply","description":"Type of the step."},"inputs":{"type":"object","description":"Input properties supported by wait for reply step.","required":["from","channel"],"properties":{"from":{"type":"string","description":"Phone number or channel user id of the user for whose reply the workflow is waiting for. If the channel is SMS, `from` should be the msisdn. If the channel is a chat apps channel, `from` should be based on the channel user id of the inbound message."},"channel":{"type":"string","description":"Messaging channel like sms, whatsapp, etc. For a complete list, refer to [channel type values](/connect/reference#list-of-supported-chatapps-channels)."},"timeout":{"type":"string","description":"Timeout in the format \"d.HH:mm:ss\". For example, \"1.6:30:15\" indicates the workflow to move on if a reply from the user is not received within 1 day, 6 hours, 30 minutes, and 15 seconds. If the timeout is in days, \"HH:mm:ss\" can be omitted. For instance, \"2\" waits for 2 days before timing out.","default":"1.00:00:00"}}},"outputs":{"type":"object","description":"Outputs supported by wait for reply step.","required":["reply"],"properties":{"reply":{"type":"object","description":"Inbound message data. Exact nature of the payload depends on the version of the inbound message webhook configured for your account. Refer to [webhook object structure](/connect/reference#webhook-object-structure) for more information."}}},"selectNextStep":{"type":"object","description":"Steps to execute depending on whether a reply is received or not. Presence or absence of the reply in the outputs indicates whether a reply was received within the timeout. Alternatively, you can set the `nextStepId` to a `Branch` step and check the conditions there.","example":{"reply_received":"{{data.reply != null}}","no_reply_received":"{{data.reply == null}}"}},"nextStepId":{"type":"string","description":"Step id of the step to be executed after the current step. If not set, workflow terminates after executing the current step. Do not use `nextStepId` and `selectNextStep` at the same time. Use one or the other."}},"title":"waitForReplyStep"},{"allOf":[{"description":"Step defines an activity to be performed when the workflow is running.","type":"object","properties":{"id":{"type":"string","description":"Step id. Step id must be unique within the workflow definition."}},"required":["id"],"title":"step"}],"type":"object","description":"Step to make the workflow wait for a reply from an end-user.","required":["stepType","inputs"],"properties":{"stepType":{"type":"string","enum":["VoiceMessage"],"default":"VoiceMessage","description":"Type of the step."},"inputs":{"type":"object","description":"Input properties supported by the voice message step.","required":["action","params"],"properties":{"subAccountId":{"type":"string","description":"Voice enabled subaccount id."},"clientRequestId":{"type":"string","description":"Unique identifier to reference the voice the message. JavaScript helper function `uuid()` can be used to generate a uuid."},"action":{"type":"string","enum":["say","say&capture","playFile"],"default":"say","description":"Action to be performed as part of the voice message. Refer to [voice messaging API documentation](/connect/reference#voice-messaging-api-1) for more information."},"params":{"type":"object","description":"Voice message parameters. Depends on the voice message action. Refer to [voice messaging API documentation](/connect/reference#voice-messaging-api-1) for supported voice message parameters."}}},"outputs":{"type":"object","description":"Supported output properties by the voice message step.","required":["response"],"properties":{"response":{"type":"object","description":"HTTP response message received from the voice messaging API. Refer to [voice messaging API documentation](/connect/reference#voice-messaging-api-1) for more information."}}},"nextStepId":{"type":"string","description":"Step id of the step to be executed after the current step. If not set, workflow terminates after executing the current step. Do not use `nextStepId` and `selectNextStep` at the same time. Use one or the other."}},"title":"voiceMessageStep"},{"allOf":[{"description":"Step defines an activity to be performed when the workflow is running.","type":"object","properties":{"id":{"type":"string","description":"Step id. Step id must be unique within the workflow definition."}},"required":["id"],"title":"step"}],"type":"object","description":"Step to make the workflow wait for a DTMF response from an end-user.","required":["stepType","inputs","outputs"],"properties":{"stepType":{"type":"string","enum":["WaitForDTMF"],"default":"WaitForDTMF","description":"Type of the step."},"inputs":{"type":"object","description":"Input properties supported by the wait for DTMF step.","properties":{"dtmfRequestId":{"type":"string","description":"Client request id or the uid of the DTMF response. Recommendation is to set the client request id in the voice message step, save it to workflow context and reference it here. If you did not set a client request id in the voice message step, save the uid of the voice message response to workflow context and reference it here."},"timeout":{"type":"string","description":"Timeout in the format \"d.HH:mm:ss\". For example, \"1.6:30:15\" indicates the workflow to move on if a reply from the user is not received within 1 day, 6 hours, 30 minutes, and 15 seconds. If the timeout is in days, \"HH:mm:ss\" can be omitted. For instance, \"2\" waits for 2 days before timing out.","default":"1.00:00:00"}}},"outputs":{"type":"object","description":"Output properties supported by the wait for DTMF step.","required":["dtmfData"],"properties":{"dtmfData":{"type":"object","description":"DTMF response data returned by the voice messaging API. Refer to [voice messaging API documentation](/connect/reference#voice-messaging-api-1) for more information.","example":{"uid":"AA562920-DD44-11EB-8FDE-A7A1C7823C5F","status":{"code":"DTMF","timestamp":"2021-07-05T03:54:31.271Z"},"destination":"xxxxxxxxxx","clientRequestId":"974eccfc-0607-4a99-a129-f9ee718e5fc1","actionDetails":{"dtmf":"2"}}}}},"selectNextStep":{"type":"object","description":"Steps to execute depending on the DTMF code. Presence or absence of the `dtmfData` in the outputs indicates whether a reply was received within the timeout. Alternatively, you can set the `nextStepId` to a `Branch` step and check the conditions there.","example":{"dtmf_1":"{{data.dtmf == '1'}}","dtmf_2":"{{data.dtmf == '2'}}","no_reply":"{{data.dtmf == null}}","invalid_dtmf":"{{data.dtmf != null && data.dtmf != '1' && data.dtmf != '2'}}"}}},"title":"waitForDTMFStep"}]}}}}},"title":"definitionInput"},{"type":"object","required":["accountId","id","version","createdAt"],"properties":{"accountId":{"type":"string","description":"8x8 account id."},"id":{"type":"string","description":"Unique definition id."},"version":{"type":"integer","minimum":1,"description":"Version of the definition. When a definition is updated, version number is automatically incremented."},"createdAt":{"type":"string","minLength":1,"description":"Timestamp when the definition was created."}}}],"title":"definition"},"examples":{"definitionInput":{"value":{"accountId":"8x8_test_account","subaccountId":"8x8_test_subaccount","trigger":"inbound_chat_apps","status":"enabled","createdAt":"2021-07-12T04:49:30.27Z","definition":{"id":"ae54eaf1-b86d-43c5-8982-2818f9bbe52c","name":"Send automatic reply","version":1,"steps":[{"id":"step1","stepType":"Wait","inputs":{"duration":"00:02:00"},"nextStepId":"step2"},{"id":"step2","stepType":"ChatAppsMessage","inputs":{"subAccountId":"8x8_subaccount_id","user":{"msisdn":"{{data.payload.user.msisdn}}"},"type":"text","content":{"text":"Hello, world!"}},"nextStepId":"step3"}]}}}}}}},"400":{"description":"Request is invalid.","content":{"application/json":{"schema":{"type":"object","description":"Error response.","properties":{"code":{"type":"integer","description":"Error code."},"message":{"type":"string","description":"Description of the error."},"errorId":{"type":"string","description":"Unique error id."},"timestamp":{"type":"string","description":"Timestamp when the error occurred."}},"required":["code","message","errorId","timestamp"],"title":"error"},"examples":{"error":{"value":{"code":5001,"message":"Workflow name is required.","errorId":"e1e9961a-2d5f-4221-9a18-ad6300846626","timestamp":"2021-07-12T08:02:03.03Z"}}}}}},"404":{"description":"Workflow definition is not found.","content":{"application/json":{"schema":{"type":"object","description":"Error response.","properties":{"code":{"type":"integer","description":"Error code."},"message":{"type":"string","description":"Description of the error."},"errorId":{"type":"string","description":"Unique error id."},"timestamp":{"type":"string","description":"Timestamp when the error occurred."}},"required":["code","message","errorId","timestamp"],"title":"error"},"examples":{"error":{"value":{"code":1300,"message":"Definition 2aa9465e-dec7-4c3e-8fa6-bd168af9eaca not found.","errorId":"2558ff83-c8db-4890-805e-ad64001857a1","timestamp":"2021-07-13T01:28:37.66Z"}}}}}}}}
>
  
</StatusCodes>


      